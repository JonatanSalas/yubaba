<html>
  <head>
    <title>material-transitions | from</title> 
    <link href="./assets/styles.css" rel="stylesheet" />
  </head>
  <body>
    <div class="hero-sticky">
      <div class="hero"></div>
    </div>

    <div class="items" style="opacity: 1;">
      <div class="item"></div>
      <div class="item"></div>
      <div class="item"></div>
      <div class="item"></div>
      <div class="start item" id="start"></div>
      <div class="item"></div>
      <div class="item"></div>
      <div class="item"></div>
      <div class="item"></div>
    </div>

    <div class="end-container" style="opacity: 1;">
      <div class="reveal-container">
        <div class="flex-container">
          <div class="end" id="end"></div>
          <div class="text-container">
            <h1>Storm Trooper</h1>
            <p>
              Jade gonk antilles darth antilles skywalker moff organa jabba. Hoth antilles skywalker luke bespin wedge. Calamari kessel padmé mon zabrak obi-wan qui-gon. Wampa wedge mace wedge calamari organa. Hutt grievous ventress secura leia. Amidala grievous secura ben windu dooku windu solo. Fett jar boba hutt padmé jade. Lobot luuke darth han darth secura moff. Kashyyyk wookiee fisto boba. Antilles hutt yoda darth calamari skywalker ben dagobah darth. Cade wedge skywalker wookiee grievous jabba ackbar.
            </p>
          </div>
        </div>

        <div class="article-body">
          <p>
            <h2>Tarka</h2>
            Lucas ipsum dolor sit amet organa mace naboo padmé jinn moff mon antilles fisto organa. Thrawn darth owen r2-d2 maul amidala. Gamorrean ben maul darth solo solo. Leia tatooine darth hutt gamorrean darth owen antilles. Bothan darth antilles yavin obi-wan yoda bespin moff fisto. Han mandalorians darth coruscant mandalore darth mon. Organa chewbacca coruscant gonk jinn binks organa. Ackbar hutt utapau skywalker. Kessel chewbacca dooku darth lars. Hutt maul obi-wan jabba jawa sidious ackbar moff. Mandalorians mon c-3p0 yoda sidious.
            Anakin ventress moff dantooine mon hutt moff. Palpatine aayla skywalker twi'lek palpatine. Grievous mace anakin k-3po droid r2-d2 skywalker. Solo palpatine windu twi'lek calamari lando yoda dantooine luke. Vader jar cade skywalker anakin hutt solo organa. Biggs solo obi-wan mara yoda skywalker. Luke antilles mace r2-d2 solo wicket darth moff luuke. Mon hutt gamorrean organa endor skywalker mon. Moff owen coruscant gonk jinn. Anakin binks dantooine thrawn. Darth kit fett luke ventress. Dantooine palpatine hutt sidious naboo.
          </p>
          <p>
            <h2>Jabba da dookie</h2>
            Owen binks hutt gamorrean calrissian moff jar. Dantooine coruscant lars fett alderaan kessel hutt kashyyyk organa. Wookiee mace fett solo kenobi. Mothma jabba vader qui-gon sith fett kamino moff c-3p0. Skywalker fett organa hoth ponda sidious mandalore. Antilles calamari jango binks mara calrissian darth. Darth mace maul c-3po padmé skywalker. Skywalker jinn hutt greedo moff maul solo tatooine hutt. Padmé obi-wan gonk qui-gon jar darth. Jar zabrak naboo moff. Calamari hutt lobot moff aayla padmé moff boba.
            Jade gonk antilles darth antilles skywalker moff organa jabba. Hoth antilles skywalker luke bespin wedge. Calamari kessel padmé mon zabrak obi-wan qui-gon. Wampa wedge mace wedge calamari organa. Hutt grievous ventress secura leia. Amidala grievous secura ben windu dooku windu solo. Fett jar boba hutt padmé jade. Lobot luuke darth han darth secura moff. Kashyyyk wookiee fisto boba. Antilles hutt yoda darth calamari skywalker ben dagobah darth. Cade wedge skywalker wookiee grievous jabba ackbar.
          </p>
        </div>
      </div>
    </div>

  <script src="/dist/mt-core.js"></script>
  <div class="fixed-buttons">
    <input id="speed" type="range" min="0.1" max="1" step="0.1" value="1" />
  </div>
<script>
const getSpeed = function () {
  return document.getElementById('speed').value;
};

function fade (element, onFinish) {
  mtCore.fadeout(element, {
    duration: 0.75 / getSpeed(),
    onStart: function () {
      console.log('fadeout:start');
    },
    onFinish: function () {
      console.log('fadeout:finish');
      onFinish && onFinish();
    },
  });
}

window.fadeout = function (onFinish) {
  fade(document.getElementById('start'), onFinish);
};

window.move = function (onFinish, onStart) {
  // Prepare starting element.
  const setEndElement = mtCore.move(document.getElementById('end'), {
    duration: 0.5 / getSpeed(),
    matchSize: true,
    cleanup: true,
    onStart: function () {
      console.log('move:start');
      onStart && onStart();
    },
    onFinish: function () {
      console.log('move:finish');
      onFinish && onFinish();
    },
  });

  // Prepare end element, can set it async (wait for page load).
  const doMove = setEndElement(document.getElementById('start'));

  // Fire when you want.
  setTimeout(doMove, 0 / getSpeed());
}

let fadeOutElement;

window.expand = function (onStart) {
  mtCore.expand(document.getElementById('start'), {
    duration: 0.5 / getSpeed(),
    background: '#3d7596',
    reverse: true,
    cleanup: true,
    coverage: 'contain',
    onStart: function () {
      console.log('expand:start');
      onStart && onStart();
    },
    onFinish: function (e) {
      fadeOutElement = e;
      console.log('expand:finish');
    },
  });
}

function prepareReveal (onFinish) {
  return mtCore.reveal(document.querySelector('.reveal-container'), {
    duration: 0.5 / getSpeed(),
    showFromElement: document.getElementById('end'),
    reverse: true,
    onStart: function () {
      console.log('reveal:start');
    },
    onFinish: function () {
      console.log('reveal:finish');
      onFinish && onFinish();
    },
  });
}

window.reveal = function (onFinish) {
  const doReveal = prepareReveal(onFinish);
  document.querySelector('.end-container').style.opacity = 1;
  doReveal();
}

const buttonsContainer = document.querySelector('.fixed-buttons');
Object.keys(mtCore).forEach(function (key) {
  const button = document.createElement('button');
  button.innerHTML = key;
  button.addEventListener('click', function () { window[key](); });

  buttonsContainer.appendChild(button);
});

const combination = document.createElement('button');
combination.innerHTML = 'material (combination)';
combination.addEventListener('click', function () {  
  reveal(function () {
    move(null, function () {
      expand();
      document.querySelector('.end-container').style.opacity = 0;
    });
  });
});

buttonsContainer.appendChild(combination);
</script>
  </body>
</html>