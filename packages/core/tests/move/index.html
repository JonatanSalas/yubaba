<html>
  <head>
    <title>material-transitions</title> 
    <link href="./assets/styles.css" rel="stylesheet" />
  </head>
  <body>
    <div class="items">
      <div class="item"></div>
      <div class="item"></div>
      <div class="item"></div>
      <div class="item"></div>
      <div class="start item" id="start"></div>
      <div class="item"></div>
      <div class="item"></div>
      <div class="item"></div>
      <div class="item"></div>
    </div>

    <div class="end-container">
      <div class="reveal-container">
        <div class="flex-container">
          <div class="end" id="end"></div>
          <div class="text-container">
            <h1>Storm Trooper</h1>
            <p>
              This guy tanks man. Seriously. He can pull 10 pokemon all the way from Aldeeraan through to Captial City.
            </p>
          </div>
        </div>

        <p class="article-body">
          In other news, this is some more text.
        </p>
      </div>
    </div>

    <script src="/dist/mt-core.js"></script>

  <div class="fixed-buttons">
    <button id="move">move</button>
    <button id="expand">expand</button>
    <button id="reveal">reveal</button>
    <button id="combination">combination</button>
  </div>
<script>
function doMove (onFinish) {
  mtCore.move(start, {
    duration: 1,
    resize: true,
    cleanup: true,
    onStart: () => {
      console.log('move:start');
    },
    onFinish: () => {
      console.log('move:finish');
      onFinish && onFinish();
    },
  })(end);
}

function doExpand (onStart) {
  mtCore.expand(start, {
    duration: 0.5,
    onStart: () => {
      console.log('expand:start');
      onStart && onStart();
    },
    onFinish: () => {
      console.log('expand:finish');
    },
  });
}

function prepareReveal (onFinish) {
  return mtCore.reveal(document.querySelector('.reveal-container'), {
    duration: 1,
    showFromElement: document.getElementById('end'),
    onStart: () => {
      console.log('reveal:start');
    },
    onFinish: () => {
      console.log('reveal:finish');
      onFinish && onFinish();
    },
  });
}

move.addEventListener('click', () => doMove());
expand.addEventListener('click', () => doExpand());

const doReveal = prepareReveal();
reveal.addEventListener('click', () => {
  document.getElementsByClassName('end-container')[0].style.opacity = 1;
  doReveal();
});

combination.addEventListener('click', () => {
  doExpand(() => {
    doMove(() => {
      document.getElementsByClassName('end-container')[0].style.zIndex = 0;
      document.getElementsByClassName('end-container')[0].style.opacity = 1;
      doReveal();
    });
  });
});
</script>
  </body>
</html>